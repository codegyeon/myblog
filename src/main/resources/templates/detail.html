<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <!-- bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
          crossorigin="anonymous"></script>
  <style>
    .title_box{
      margin: 50px auto;
      display: block;
      background-color: indianred;
      text-align: center;
    }
  </style>
  <script>
    function deleteOne() {
      let id = document.location.href.charAt(document.location.href.length-1);
      console.log(id)
      $.ajax({
        type: "DELETE",
        url: `/api/delete/${id}`,
        success: function (response) {
          alert('메시지 삭제에 성공하였습니다.');
          window.location.href='/'
        }
      })
    }
    // $(document).ready(function () {
    //   let getId = document.location.href.charAt(document.location.href.length-1);
    //   deleteOne(getId);
    // })
    // function getMessages(id) {
    //   $.ajax({
    //     type: 'GET',
    //     url: `/detail/${id}`,
    //     success: function(response){
    //       let id = response.id
    //       let title = response.title
    //       let name = response.name
    //       let contents = response.contents
    //       let modifiedAt = response.modifiedAt
    //       addHTML(id,title,name,contents, modifiedAt);
    //       console.log(response)
    //     }
    //   })
    // }
    // 메모 하나를 HTML로 만들어서 body 태그 내 원하는 곳에 붙입니다.
    // function addHTML(id,title, name, contents, modifiedAt) {
    //   // 1. HTML 태그를 만듭니다.
    //   let tempHtml = `<div class="card-header">
    //                            ${title}
    //                         </div>
    //                         <div class="card-body">
    //                             <h5 class="card-title">${name}</h5>
    //                             <p class="card-text" style="margin-top: 30px">${contents}</p>
    //                         </div>
    //
    //                         <div style="margin-bottom: 50px">
    //                             <button id="${id}-re" style="width: 100px; display: inline; margin-left: 130px">
    //                                 수정하기
    //                             </button>
    //                             <button id="${id}-de" style="width: 100px; display: inline;margin-left: 40px">
    //                                 삭제하기
    //                             </button>
    //                         </div>`;
    //   // 2. #cards-box 에 HTML을 붙인다.
    //   $('#cardbox12').append(tempHtml);
    // }

  </script>

</head>
<body>
<div>
  <h1 class="title_box" style="cursor: pointer;" onclick="window.location.href='/'">나만의 항해 블로그</h1>
</div>


<div id = cardbox12 class="card" style="width: 500px;height: 600px;margin: auto">
  <div class="card-header" th:text=  "${details.title}">

  </div>
  <div class="card-body">
    <h5 class="card-title" th:text= "${details.name}"></h5>
    <p class="card-text" style="margin-top: 30px" th:text="${details.contents}"> </p>
  </div>
<!--  //th:text="${details.id}"-->
  <div style="margin-bottom: 50px">
    <button id="${id}-re" style="width: 100px; display: inline; margin-left: 130px" onclick="deleteOne()">
      수정하기는 미완성(누르면 삭제됩니다.)
    </button>
    <button id="${id}-de" style="width: 100px; display: inline;margin-left: 40px" onclick="deleteOne()">
      삭제하기
    </button>
  </div>
</div>

</body>
</html>